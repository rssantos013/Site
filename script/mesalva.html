<div>
  <div>// ==UserScript==</div>
  <div>// @name Me Salva | RaphaelCheat's</div>
  <div>// @namespace http://tampermonkey.net/</div>
  <div>// @version 2024-10-12</div>
  <div>// @description Utilize Com Sabedoria!</div>
  <div>// @author RaphaelCheat's</div>
  <div>// @match https://www.mesalva.com/*</div>
  <div>
    // @icon https://www.google.com/s2/favicons?sz=64&amp;domain_url=mesalva.com
  </div>
  <div>// @grant none</div>
  <div>// ==/UserScript==</div>

  <div>//TODO: fazer opcao pra marcar video como concluido</div>

  <div>let notificationCount = 0;</div>

  <div>function createAndShowNotification(message) {</div>
  <div>return new Promise((resolve) =&gt; {</div>
  <div>if (document.getElementById('notification-styles') === null) {</div>
  <div>const e = document.createElement("style");</div>
  <div>e.id = 'notification-styles';</div>
  <div>e.innerHTML = `</div>
  <div>.notification {</div>
  <div>position: fixed;</div>
  <div>right: -320px;</div>
  <div>background-color: #333;</div>
  <div>color: #fff;</div>
  <div>padding: 10px;</div>
  <div>border-radius: 10px;</div>
  <div>box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);</div>
  <div>z-index: 1000;</div>
  <div>width: 320px;</div>
  <div>height: 60px;</div>
  <div>transition: right 0.5s ease;</div>
  <div>}</div>
  <div>.notification-content {</div>
  <div>position: relative;</div>
  <div>height: 100%;</div>
  <div>}</div>
  <div>.notification-content p {</div>
  <div>margin: 0;</div>
  <div>padding-top: 0;</div>
  <div>}</div>
  <div>.progress-bar {</div>
  <div>position: absolute;</div>
  <div>bottom: 5px;</div>
  <div>left: 50%;</div>
  <div>transform: translateX(-50%);</div>
  <div>height: 5px;</div>
  <div>background-color: #555;</div>
  <div>border-radius: 5px;</div>
  <div>width: 90%;</div>
  <div>overflow: hidden;</div>
  <div>}</div>
  <div>.progress-bar div {</div>
  <div>height: 100%;</div>
  <div>background-color: #bbb;</div>
  <div>width: 100%;</div>
  <div>animation: progress 5s linear forwards;</div>
  <div>}</div>
  <div>@keyframes progress {</div>
  <div>from {</div>
  <div>width: 100%;</div>
  <div>}</div>
  <div>to {</div>
  <div>width: 0;</div>
  <div>}</div>
  <div>}</div>
  <div>`;</div>
  <div>document.head.appendChild(e);</div>
  <div>}</div>

  <div>notificationCount++;</div>

  <div>const t = document.createElement("div");</div>
  <div>t.id = `notification-${notificationCount}`;</div>
  <div>t.className = "notification";</div>
  <div>t.style.bottom = `${20 + (notificationCount - 1) * 70}px`;</div>
  <div>t.style.right = "20px";</div>
  <div>t.innerHTML = `</div>
  <div>&lt;div class="notification-content"&gt;</div>
  <div>&lt;p&gt;${message}&lt;/p&gt;</div>
  <div>&lt;div class="progress-bar"&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;</div>
  <div>&lt;/div&gt;</div>
  <div>`;</div>
  <div>document.body.appendChild(t);</div>

  <div>setTimeout(() =&gt; {</div>
  <div>t.style.right = "20px";</div>
  <div>}, 10);</div>

  <div>setTimeout(() =&gt; {</div>
  <div>t.style.right = "-300px";</div>
  <div>setTimeout(() =&gt; {</div>
  <div>t.style.display = "none";</div>
  <div>notificationCount--;</div>
  <div>resolve();</div>
  <div>}, 500);</div>
  <div>}, 5000);</div>
  <div>});</div>
  <div>}</div>

  <div>createAndShowNotification("sussy baka amongus");</div>
  <div>createAndShowNotification("halala marcos10pc");</div>
  <div>createAndShowNotification("se vc pagou por isso vc foi scammado");</div>

  <div>function abacate(originalUrl) {</div>
  <div>const url = new URL(originalUrl);</div>
  <div>const pathParts = url.pathname.split('/');</div>
  <div>const exerciseId = pathParts[pathParts.length - 1];</div>
  <div>
    const newPath =
    `/app/_next/data/eotWR84n2AGZWHLCKUcH5/exercicio/${exerciseId}.json`;
  </div>
  <div>const params = new URLSearchParams(url.search);</div>
  <div>params.append('content', 'exercicio');</div>
  <div>params.append('content', exerciseId);</div>
  <div>return `https://www.mesalva.com${newPath}?${params.toString()}`;</div>
  <div>}</div>

  <div>(async function() {</div>
  <div>'use strict';</div>

  <div>
    let catapimbas =
    /^https:\/\/www\.mesalva\.com\/app\/exercicio\/[a-z0-9\-]+(\?contexto=[^&amp;]+&amp;lista=[^&amp;]+&amp;modulo=[^&amp;]+)?$/;
  </div>
  <div>console.log("-- sussy baka amongus marcos10pc --");</div>
  <div>let oldHref = document.location.href;</div>

  <div>const observer = new MutationObserver(async () =&gt; {</div>
  <div>if (oldHref !== document.location.href) {</div>
  <div>oldHref = document.location.href;</div>

  <div>if (catapimbas.test(oldHref)) {</div>
  <div>await new Promise(resolve =&gt; setTimeout(resolve, 1000));</div>
  <div>let answer_url = abacate(oldHref);</div>
  <div>console.log(`${answer_url}`);</div>

  <div>try {</div>
  <div>let pre_answer = await fetch(answer_url, {</div>
  <div>method: "GET",</div>
  <div>});</div>

  <div>if (!pre_answer.ok) {</div>
  <div>alert('uh, deu alguma porra ao tentar pegar resposta');</div>
  <div>return;</div>
  <div>}</div>

  <div>let porra_answer = await pre_answer.json();</div>
  <div>const caralhos = porra_answer.pageProps.content.children[0].list;</div>
  <div>
    const damn = caralhos.find(resposta =&gt; resposta.isCorrect === true);
  </div>

  <div>if (damn) {</div>
  <div>console.log(`[DEBUG] -- ${JSON.stringify(damn)} --`);</div>
  <div>createAndShowNotification(`RESPOSTA: ${damn.letter}`);</div>
  <div>
    const buttons = document.querySelectorAll('.exercise-answer__button');
  </div>
  <div>let clicked = false;</div>

  <div>buttons.forEach(button =&gt; {</div>
  <div>
    const letterElement = button.querySelector('.exercise-answer__letter');
  </div>
  <div>
    if (letterElement &amp;&amp; letterElement.textContent.trim() ===
    damn.letter) {
  </div>
  <div>button.click();</div>
  <div>clicked = true;</div>
  <div>}</div>
  <div>});</div>
  <div>if (clicked) {</div>
  <div>
    const submitButton =
    document.querySelector('.btn.btn--primary.btn--size-md.submit-button');
  </div>
  <div>if (submitButton) {</div>
  <div>submitButton.click();</div>

  <div>await new Promise(resolve =&gt; setTimeout(resolve, 1000));</div>

  <div>
    const nextButton = document.querySelector('.btn.btn--primary.btn--size-md');
  </div>
  <div>if (nextButton) {</div>
  <div>nextButton.click();</div>
  <div>}</div>
  <div>}</div>
  <div>}</div>
  <div>} else {</div>
  <div>createAndShowNotification("Resposta n&atilde;o encontrada.");</div>
  <div>}</div>
  <div>} catch (error) {</div>
  <div>console.error('Erro no fetch:', error);</div>
  <div>}</div>
  <div>}</div>
  <div>}</div>
  <div>});</div>

  <div>observer.observe(document.body, {</div>
  <div>childList: true,</div>
  <div>subtree: true</div>
  <div>});</div>
  <div>})();</div>
</div>
